package com.game.component;

import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.locks.ReadWriteLock;
import java.util.concurrent.locks.ReentrantReadWriteLock;

import com.base.component.AbstractComponent;
import com.util.NamedThreadFactory;

/**
 * 掉落奖励组件
 * 
 * @author dream
 *
 */
public class ChargeComponent extends AbstractComponent
{
    private static ReadWriteLock lock = new ReentrantReadWriteLock();

    private static String Access_Token = "";

    private static String token_url = "https://accounts.google.com/o/oauth2/token";
    private static String redirect_url = "https://whalerun-project.firebaseapp.com/__/auth/handler";
    private static String grant_type = "refresh_token";
    private static String client_id = "387829453470-aitrnijhq7o5l2srabvb12gerl309ajs.apps.googleusercontent.com";
    private static String client_secret = "zmmoJP3F_Z5azCuktHh9DwcY";
    private static String refresh_token = "1//06rXCWEq1cElpCgYIARAAGAYSNwF-L9IrMA84PfWd7EvlKNKNteCXG0FHWWhFqZOy6TCK3QdmWL0M8VSkC6IgFwXBmkE2CofiGJM";

    private static String get_url = "https://www.googleapis.com/androidpublisher/v2/applications/%s/purchases/products/%s/tokens/%s?access_token=%s";

    private static String PackageName = "";

    private static ScheduledExecutorService refreshJob;

    @Override
    public boolean initialize()
    {
        refreshJob = Executors.newSingleThreadScheduledExecutor(new NamedThreadFactory("refresh-token"));
        refreshJob.scheduleWithFixedDelay(() -> refreshToken(), 3, 1 * 60, TimeUnit.SECONDS);

        return true;
    }

    private Object refreshToken()
    {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void stop()
    {

    }

}
