package com.logic.map;

import java.util.ArrayList;
import java.util.List;

import com.proto.map.gen.WorldMapMsg.ConfigNodeProto;

/**
 * 地图节点
 * 
 * @author dream
 *
 */
public class MapNode
{
    private int nodeID;

    /** 节点列号 */
    private int nx;

    /** 节点行号 */
    private int ny;

    private int px;

    private int py;

    private boolean isCanMove;
    
    private List<MapNode> neighbors;

    public MapNode(ConfigNodeProto config)
    {
        nodeID = config.getNodeID();
        nx = config.getNodeX();
        ny = config.getNodeY();
        isCanMove = config.getIsCanMove();
        px = config.getPixelX();
        py = config.getPixelY();
        neighbors=new ArrayList<>();
    }
    
    public void wrapNeighbor()
    {
        // 如果是偶数行
        if (nodeY / 2 == 0)
        {
            MapNode node = map.getNode(nodeX-1, nodeY - 1);
            list.add(new PathANode(node));

            node = map.getNode(nodeX - 1, nodeY);
            list.add(new PathANode(node));

            node = map.getNode(nodeX-1, nodeY + 1);
            list.add(new PathANode(node));

            node = map.getNode(nodeX, nodeY + 1);
            list.add(new PathANode(node));

            node = map.getNode(nodeX + 1, nodeY);
            list.add(new PathANode(node));

            node = map.getNode(nodeX, nodeY - 1);
            list.add(new PathANode(node));
        }
        else
        {
            MapNode node = map.getNode(nodeX, nodeY - 1);
            list.add(new PathANode(node));

            node = map.getNode(nodeX - 1, nodeY);
            list.add(new PathANode(node));

            node = map.getNode(nodeX, nodeY + 1);
            list.add(new PathANode(node));

            node = map.getNode(nodeX + 1, nodeY + 1);
            list.add(new PathANode(node));

            node = map.getNode(nodeX + 1, nodeY);
            list.add(new PathANode(node));

            node = map.getNode(nodeX + 1, nodeY - 1);
            list.add(new PathANode(node));
        }

        return list;
    }

    public boolean getCanMove()
    {
        return isCanMove;
    }

    public int getPX()
    {
        return px;
    }

    public int getPY()
    {
        return py;
    }

    public int getNodeX()
    {
        return nx;
    }

    public int getNodeY()
    {
        return ny;
    }

    public int getNodeID()
    {
        return nodeID;
    }
}
